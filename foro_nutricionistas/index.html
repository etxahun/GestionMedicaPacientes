<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Foro Nutricionistas</title>
        <link type="text/css" rel="stylesheet" href="css/main.css" />
        
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="js/RGraph/libraries/RGraph.common.core.js" ></script>
        <script src="js/RGraph/libraries/RGraph.common.dynamic.js" ></script>
        <script src="js/RGraph/libraries/RGraph.common.effects.js" ></script>
        <script src="js/RGraph/libraries/RGraph.common.key.js" ></script>
        <script src="js/RGraph/libraries/RGraph.common.tooltips.js"></script>
        <script src="js/RGraph/libraries/RGraph.line.js" ></script>
        
        <script type="text/javascript" src="js/main.js"></script>
        <script type="text/javascript" >
            //var users_list = [{id: 1,user: "neretxui", target: 85},{id: 2,user: "esb", target: 80},{id: 3,user: "pecosa", target: 64},{id: 4,user: "halls", target: 90},];
            
            /** Fill form values by default */
            var fillDefaultFormValues = function() 
            {
                getUsersArray(fillComboBox, "#sel_users" );
                $("#input_date").val( getCurrentDate() );
                $("#input_time").val( "08:00" );
            }
            
            /** Event function for when the submit button is clicked */
            var btnSubmitOnClick = function()
            {
                var user_id = $("#sel_users option:selected").val();
                var date = $("#input_date").val();
                var time = $("#input_time").val();
                var value = $("#input_value").val();
                
                if( date=="" || time=="" || value=="" ) {
                    alert( "Has de completar todos los datos" );
                    return;
                }
                
                if( user_id<1 ) {
                    alert( "Has de especificar un usuario correcto" );
                    return;
                }
                
                addWeight( user_id, date, time, value );
            }
            
            /** Main function, loads when the page is fully loaded */
            $(document).ready( function() {
                setHiddenResultsContainer("#hidden_results");
                
                fillDefaultFormValues();
                $("#btn_submit").click( btnSubmitOnClick );
                
                //displayUsers( users_list, "#users" );
                updateUsersView();
                updateWeightsView();
                
            });
        </script>
        
    </head>
    
    <body>
        <h1>Foro Nutricionistas</h1>
        <div id="form">
            <table>
                <tr><td style="text-align: right">User:</td><td><select id="sel_users"></select></td></tr>
                <tr><td style="text-align: right">Fecha:</td><td><input type="text" id="input_date" /> yyyy-mm-dd</td></tr>
                <tr><td style="text-align: right">Hora: </td><td><input type="text" id="input_time" /> hh:mm</td></tr>
                <tr><td style="text-align: right">Peso: </td><td><input type="text" id="input_value" /> kg</td></tr>
                <tr><td style="text-align: right">&nbsp;</td><td><button id="btn_submit">Enviar</button></td></tr>
            </table>
        </div>
        <hr />
        <div id="users"></div>
        <hr />
        <div id="canvas">
        	<canvas id="w_graph" width="500" height="250" style="float: left">Canvas no soportado</canvas>
        	<div id="lecturas" style="float:left"></div>
        </div>
        <div id="weights" style="clear: both"></div>

        <!-- Hidden DIV to hold the results from the ajax calls -->
        <div id="hidden_results" style="visibility: hidden"></div>
    </body>
</html>